{"version":3,"file":"RouteModule.js","sourceRoot":"","sources":["../../src/RouteModule.ts"],"names":[],"mappings":";AAAA,IAAM,WAAW,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC;AAC5C,IAAY,IAAI,WAAM,MAAM,CAAC,CAAA;AAC7B,wBAAoF,WAAW,CAAC,CAAA;AAEhG;IAoBE,0BAAoB,gBAAwB,EAAU,kBAA0B,EAAU,KAA0B;QAAhG,qBAAgB,GAAhB,gBAAgB,CAAQ;QAAU,uBAAkB,GAAlB,kBAAkB,CAAQ;QAAU,UAAK,GAAL,KAAK,CAAqB;QAClH,IAAA,gCAAiF,EAAzE,kBAAU,EAAE,iBAAS,CAAqD;QAClF,IAAA,oHAIC,EAJO,kBAAM,EAAE,wBAAS,EAAE,sBAAQ,CAIjC;QAEF,IAAI,CAAC,OAAO,GAAG;YACb,MAAM,EAAE,OAAO,MAAM,KAAK,QAAQ,GAAG,MAAM,GAAG,KAAK,CAAC,MAAM;YAC1D,oBAAS;YACT,QAAQ,EAAE,OAAO,QAAQ,KAAK,SAAS,GAAG,QAAQ,GAAG,KAAK,CAAC,QAAQ;SACpE,CAAC;QAEF,oCAAoC;QACpC,IAAA,sCAAsF,EAA9E,gBAAQ,EAAE,kBAAU,CAA2D;QAEvF,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC;QAC5B,IAAI,CAAC,UAAU,GAAG,UAAU,IAAI,SAAS,CAAC;QAE1C,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,kBAAkB,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;QACpF,IAAI,CAAC,aAAa,GAAG,QAAQ,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;QAE9C,IAAM,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,kBAAkB,CAAC,CAAC;QACpD,wDAAwD;QACxD,IAAI,CAAC,QAAQ,GAAI,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC;IAEtD,CAAC;IAEO,sCAAW,GAAnB,UAAoB,YAAY;QAC9B,IAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;QAE7C,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,EAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;IAC7D,CAAC;IACH,uBAAC;AAAD,CAAC,AAtDD,IAsDC;AAtDY,wBAAgB,mBAsD5B,CAAA","sourcesContent":["const loaderUtils = require('loader-utils');\r\nimport * as path from 'path';\r\nimport { RouteResourceOptions, RouterLoaderOptions, DEFAULT_RESOURCE_OPTIONS } from './options';\r\n\r\nexport class RouteDestination {\r\n  readonly options: RouteResourceOptions;\r\n\r\n  /**\r\n   * The absolute file path to the destination from the import.\r\n   */\r\n  readonly filePath: string;\r\n  readonly moduleName: string;\r\n  readonly rawFilePath: string;\r\n\r\n  /**\r\n   * If true the source resource is a angular compiler compiled module (ngFactory).\r\n   */\r\n  readonly isCompiled: boolean;\r\n\r\n  /**\r\n   * If true the original (raw) file path is a relative path.\r\n   */\r\n  readonly isRawRelative: boolean;\r\n\r\n  constructor(private loadChildrenPath: string, private sourceResourcePath: string, private query: RouterLoaderOptions) {\r\n    const [ pathString, pathQuery ] = loadChildrenPath.split('?') as [string, string];\r\n    const { loader, chunkName, bySymbol } = Object.assign(\r\n      {},\r\n      DEFAULT_RESOURCE_OPTIONS,\r\n      loaderUtils.parseQuery(pathQuery ? '?' + pathQuery : '')\r\n    );\r\n\r\n    this.options = {\r\n      loader: typeof loader === 'string' ? loader : query.loader,\r\n      chunkName,\r\n      bySymbol: typeof bySymbol === 'boolean' ? bySymbol : query.bySymbol\r\n    };\r\n\r\n    // split the string on the delimiter\r\n    const [ filePath, moduleName ] = pathString.split(query.delimiter) as [string, string];\r\n\r\n    this.rawFilePath = filePath;\r\n    this.moduleName = moduleName || 'default';\r\n\r\n    this.isCompiled = this.getFilename(sourceResourcePath).endsWith(query.moduleSuffix);\r\n    this.isRawRelative = filePath.startsWith('.');\r\n\r\n    const currentDir = path.dirname(sourceResourcePath);\r\n    // the absolute path of our destenation NgModule module.\r\n    this.filePath =  path.resolve(currentDir, filePath);\r\n\r\n  }\r\n\r\n  private getFilename(resourcePath): string {\r\n    const filename = path.basename(resourcePath);\r\n\r\n    return path.basename(resourcePath, path.extname(filename));\r\n  }\r\n}\r\n"]}